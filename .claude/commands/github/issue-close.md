---
name: issue-close
description: Close an issue with a completion comment
allowed-tools: Bash(gh issue view:*), Bash(gh issue edit:*), Bash(gh issue close:*)
argument-hint: <issue-number>
---

Close issue #$ARGUMENTS with a summary comment and clean up stage labels.

## Pre-loaded Context

`!gh issue view $ARGUMENTS && echo -e "\n========== COMMENTS ==========\n" && gh issue view $ARGUMENTS --comments`

## Steps:

1. **Validate arguments:** If $ARGUMENTS is empty, prompt user for issue number
2. **Summarize what was completed:** Brief description of work done based on pre-loaded context
3. **Draft closure comment to sandbox:** Write to `docs/sandbox/issue-$ARGUMENTS-closure.md` with:
    - ðŸ¤– header: `ðŸ¤– Generated by Claude Code`
    - Written in third person, past tense
    - Summary of completed work
    - PR link if applicable
    - Any follow-up notes
4. **Wait for user approval**
5. **Check if issue changes are committed:** Ask user to commit if not
6. **Provide commands to clean labels and close:**

```bash
# Remove stage labels (closed issues don't need stage tracking)
gh issue edit $ARGUMENTS --remove-label "improve-issue,plan,in-progress,review,blocked"

# Close with comment
gh issue close $ARGUMENTS --comment "$(cat docs/sandbox/issue-$ARGUMENTS-closure.md)"
```

**Note:** Only use manually if issue wasn't linked with "Fixes #X" in PR.
